- name: Create OCP3 instance security group
  ec2_group:
    name: "{{ instance_name }}"
    description: "{{ instance_name }}"
    vpc_id: "{{ ec2_vpc.vpc.id }}"
    region: "{{ ec2_region }}"
    rules_egress:
    - proto: "all"
      from_port: "0"
      to_port: "65535"
      cidr_ip: "0.0.0.0/0"
    rules:
    - proto:        "tcp"
      from_port:    "22"
      to_port:      "22"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "43"
      to_port:      "43"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "53"
      to_port:      "53"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "udp"
      from_port:    "53"
      to_port:      "53"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "80"
      to_port:      "80"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "443"
      to_port:      "443"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "1338"
      to_port:      "1338"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "1936"
      to_port:      "1936"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "2049"
      to_port:      "2049"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "udp"
      from_port:    "2049"
      to_port:      "2049"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "2379"
      to_port:      "2379"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "2380"
      to_port:      "2380"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "8443"
      to_port:      "8443"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "5432"
      to_port:      "5432"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "5000"
      to_port:      "5000"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "4001"
      to_port:      "4001"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "udp"
      from_port:    "4789"
      to_port:      "4789"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "8053"
      to_port:      "8053"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "udp"
      from_port:    "8053"
      to_port:      "8053"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "9000"
      to_port:      "9000"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "9200"
      to_port:      "9200"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "9300"
      to_port:      "9300"
      cidr_ip:      "0.0.0.0/0"
    - proto:        "tcp"
      from_port:    "10250"
      to_port:      "10250"
      cidr_ip: "0.0.0.0/0"
